(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{313:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var a=s(5155);s(2115);var r=s(1955),i=s(5695);s(565);var c=s(6874),l=s.n(c);let n=()=>{let{items:e,onAddToCart:t,isItemInCart:s}=(0,r.Us)(),c=(0,i.useParams)(),n=null==c?void 0:c.title,o=n?decodeURIComponent(n):"",d=e.find(e=>e.title.toLowerCase()===o.toLowerCase());if(!d)return(0,a.jsx)("p",{children:"Товар не найден"});let u=d.price.toLocaleString("ru-RU"),m=d&&s(d.title);return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("p",{className:"product-title",children:d.category}),(0,a.jsx)("h1",{className:"product-title2",children:d.title}),(0,a.jsxs)("div",{className:"preinfo",children:[(0,a.jsx)("p",{className:"product-meta",children:"Артикул: 21312132 | Гарантия: 1 год"}),(0,a.jsxs)("p",{className:"product-rating",children:[(0,a.jsx)("img",{src:"/icons/stars.png",alt:"stars"}),(0,a.jsx)("span",{className:"rating-text",children:"(2 отзыва)"})]})]}),(0,a.jsxs)("section",{className:"product-section",children:[(0,a.jsxs)("div",{className:"thumbnail-gallery",children:[(0,a.jsx)("img",{src:"".concat(d.imageUrl),alt:"Гитара миниатюра 1",className:"thumbnail"}),(0,a.jsx)("img",{src:"".concat(d.imageUrl),alt:"Гитара миниатюра 2",className:"thumbnail"})]}),(0,a.jsx)("div",{className:"product-gallery",children:(0,a.jsx)("div",{className:"img-main",children:(0,a.jsx)("img",{src:"".concat(d.imageUrl),alt:d.title||"Товар",className:"main-image"})})}),(0,a.jsxs)("div",{className:"product-details",children:[(0,a.jsxs)("ul",{className:"product-specs",children:[(0,a.jsx)("h2",{children:(0,a.jsx)("strong",{children:"Характеристики:"})}),(0,a.jsx)("li",{children:"Количество струн: 6"}),(0,a.jsx)("li",{children:"Конфигурация звукоснимателей: H-S-S"}),(0,a.jsx)("li",{children:"Крепление грифа: на болтах"}),(0,a.jsx)("li",{children:"Материал грифа: клён"}),(0,a.jsx)("li",{children:"Материал корпуса: тополь"}),(0,a.jsx)("li",{children:"Материал накладки грифа: сосна"}),(0,a.jsx)("li",{children:"Ориентация: правосторонняя"}),(0,a.jsx)("li",{children:"Форма корпуса: Superstrat"}),(0,a.jsx)("li",{children:"Мензура, дюймы: 25.5"}),(0,a.jsx)("li",{children:"Тип бриджа: Tremolo"}),(0,a.jsx)("a",{href:"#",className:"specs-link",children:"Все характеристики"})]}),(0,a.jsxs)("div",{className:"order-block-tovar",children:[(0,a.jsxs)("div",{className:"buy-prod",children:[(0,a.jsx)("div",{className:"subtitle2",children:(0,a.jsxs)("span",{children:[u," ₽."]})}),(0,a.jsx)("button",{className:"buy",children:m?(0,a.jsx)(l(),{href:"/cart",children:(0,a.jsx)("img",{className:"img2",src:"/pictures/inCart.svg",alt:"In Cart"})}):(0,a.jsx)("button",{onClick:()=>t(d),children:(0,a.jsx)("img",{className:"img2",src:"/pictures/toCart.svg",alt:"Add to Cart"})})})]}),(0,a.jsx)("div",{className:"aftertitle",children:(0,a.jsx)("span",{children:"Только самовывоз!"})})]})]})]}),(0,a.jsxs)("section",{className:"reviews-section",children:[(0,a.jsx)("h2",{children:"Отзывы магазина"}),(0,a.jsxs)("div",{className:"review-summary",children:[(0,a.jsxs)("div",{className:"review-rating",children:[(0,a.jsx)("span",{className:"review-score",children:"5.0"}),(0,a.jsx)("p",{children:"2 отзыва"})]}),(0,a.jsx)("p",{className:"recommend",children:"100% рекомендуют"})]}),(0,a.jsxs)("div",{className:"review-list",children:[(0,a.jsxs)("article",{className:"review-item",children:[(0,a.jsx)("p",{className:"review-author",children:(0,a.jsx)("strong",{children:"Денис Зиновкин"})}),(0,a.jsx)("p",{className:"review-text",children:"Решил подарить своему другу гитару на др. Заказал на этом сайте, гитара пришла настолько быстро, что его др не наступило еще. Так вот, сижу теперь сам играю. Всем советую."}),(0,a.jsx)("p",{className:"review-date",children:"28 октября 2024"}),(0,a.jsx)("img",{src:"/icons/stars.png",alt:"stars",className:"main-image"})]}),(0,a.jsxs)("article",{className:"review-item",children:[(0,a.jsx)("p",{className:"review-author",children:(0,a.jsx)("strong",{children:"Денис Зиновкин"})}),(0,a.jsx)("p",{className:"review-text",children:'Решил оставить еще один комментарий. В общем, гитару ему не отдал, сам теперь играю, но сайт "Аккорд" всем посоветовал.'}),(0,a.jsx)("p",{className:"review-date",children:"15 ноября 2024"}),(0,a.jsx)("img",{src:"/icons/stars.png",alt:"stars",className:"main-image"})]})]})]})]})}},565:()=>{},1955:(e,t,s)=>{"use strict";s.d(t,{MI:()=>n,ob:()=>d,Us:()=>u});var a=s(5155),r=s(2115),i=s(3464);function c(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)e[a]=s[a]}return e}var l=function e(t,s){function a(e,a,r){if("undefined"!=typeof document){"number"==typeof(r=c({},s,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in r)r[l]&&(i+="; "+l,!0!==r[l]&&(i+="="+r[l].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+i}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],a={},r=0;r<s.length;r++){var i=s[r].split("="),c=i.slice(1).join("=");try{var l=decodeURIComponent(i[0]);if(a[l]=t.read(c,l),e===l)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){a(e,"",c({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,c({},this.attributes,t))},withConverter:function(t){return e(c({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let n=(0,r.createContext)(null),o="https://673876654eb22e24fca800c5.mockapi.io",d=e=>{let{children:t}=e,[s,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[p,x]=(0,r.useState)(null),[j,f]=(0,r.useState)(""),[v,N]=(0,r.useState)([]),g=(null==d?void 0:d.map(e=>({...e,price:Number(e.price)})))||[];(0,r.useEffect)(()=>{let e=l.get("favorites");if(e)try{N(JSON.parse(e))}catch(e){console.error("Ошибка при загрузке избранного:",e)}},[]),(0,r.useEffect)(()=>{v.length>0?l.set("favorites",JSON.stringify(v),{expires:30}):l.remove("favorites")},[v]);let b=(0,r.useCallback)(e=>{N(t=>t.some(t=>t.id===e.id)?t:[...t,e])},[]),w=(0,r.useCallback)(e=>{N(t=>t.filter(t=>t.id!==e))},[]),y=(0,r.useCallback)(e=>v.some(t=>t.id===e),[v]),C=(0,r.useCallback)(async()=>{h(!0),x(null);try{let[e,t]=await Promise.allSettled([i.A.get("".concat(o,"/items")),i.A.get("".concat(o,"/cart"))]);"fulfilled"===e.status&&c(e.value.data),"fulfilled"===t.status&&u(t.value.data)}catch(e){x("Ошибка при загрузке данных!")}finally{h(!1)}},[]);(0,r.useEffect)(()=>{C()},[C]);let k=async e=>{try{let{data:t}=await i.A.post("".concat(o,"/items"),e);c(e=>[...e,t])}catch(e){console.error("Ошибка при добавлении товара:",e)}},S=async(e,t)=>{try{let{data:s}=await i.A.put("".concat(o,"/items/").concat(e),t);c(t=>t.map(t=>t.id===e?{...t,...s}:t))}catch(e){x("Ошибка при обновлении товара.")}},U=async e=>{try{await i.A.delete("".concat(o,"/items/").concat(e)),c(t=>t.filter(t=>t.id!==e))}catch(e){x("Ошибка при удалении товара.")}},A=(0,r.useCallback)(async e=>{try{let t=d.find(t=>t.title===e.title);if(t){let e={...t,quantity:t.quantity+1};await i.A.put("https://673876654eb22e24fca800c5.mockapi.io/cart/".concat(t.id),e),u(s=>s.map(s=>s.id===t.id?e:s))}else{let t={...e,quantity:1},{data:s}=await i.A.post("https://673876654eb22e24fca800c5.mockapi.io/cart",t);u(e=>[...e,s])}}catch(e){console.error("Ошибка при добавлении товара в корзину:",e)}},[d]),I=async e=>{try{let t=d.find(t=>t.id===e);if(!t)return;if(t.quantity>1){let s={...t,quantity:t.quantity-1};await i.A.put("https://673876654eb22e24fca800c5.mockapi.io/cart/".concat(e),s),u(t=>t.map(t=>t.id===e?s:t))}else await i.A.delete("https://673876654eb22e24fca800c5.mockapi.io/cart/".concat(e)),u(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Ошибка при обновлении количества товара:",e)}};return(0,a.jsxs)(n.Provider,{value:{items:s,cartItems:d,processedItems:g,addProduct:k,updateProduct:S,deleteProduct:U,onAddToCart:A,onRemoveItem:I,isItemInCart:e=>d.some(t=>t.title===e),activeCategory:j,setActiveCategory:f,loading:m,error:p,favorites:v,addToFavorites:b,removeFromFavorites:w,isItemInFavorites:y},children:[m?(0,a.jsx)("span",{className:"loader"}):t,p&&(0,a.jsx)("p",{style:{color:"red"},children:p})]})},u=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useContext must be inside a Provider with a value");return e}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7289:(e,t,s)=>{Promise.resolve().then(s.bind(s,313))}},e=>{var t=t=>e(e.s=t);e.O(0,[751,464,874,441,684,358],()=>t(7289)),_N_E=e.O()}]);