(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3406:()=>{},3805:(e,a,s)=>{"use strict";s.d(a,{default:()=>o});var r=s(5155),l=s(2115),t=s(4540),i=s(6421),d=s(6874),c=s.n(d);s(3406);let o=()=>{var e;let a=(0,t.wA)(),{data:s,status:d}=(0,t.d4)(e=>e.auth);return((0,l.useEffect)(()=>{"idle"===d&&a((0,i.Rd)())},[a,d]),"loading"===d)?(0,r.jsx)("div",{className:"profile",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"loading",children:"Загрузка..."})})}):"error"!==d&&s?(0,r.jsx)("div",{className:"profile",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"profile-card",children:[(0,r.jsxs)("div",{className:"profile-header",children:[(0,r.jsx)("div",{className:"profile-avatar-container",children:(0,r.jsx)("img",{src:"/logo/NewLogo4.png",alt:"User Avatar",className:"profile-avatar"})}),(0,r.jsxs)("div",{className:"profile-details",children:[(0,r.jsx)("div",{className:"profile-item"}),(0,r.jsxs)("div",{className:"profile-item",children:[(0,r.jsx)("label",{className:"profile-label",children:(0,r.jsx)("b",{children:"Email:"})}),(0,r.jsx)("p",{className:"profile-email",children:s.email||"kirill.wep@gmail.com"})]})]}),(0,r.jsx)("div",{className:"profile-actions",children:(0,r.jsx)("button",{className:"btn logout-btn",onClick:()=>{localStorage.removeItem("token"),window.location.href="/login"},children:"Выйти из аккаунта"})})]}),(0,r.jsxs)("div",{className:"profile-orders",children:[(0,r.jsx)("h2",{className:"orders-title",children:"Ваши заказы"}),(null==(e=s.orders)?void 0:e.length)?(0,r.jsx)("div",{className:"orders-list",children:s.orders.map(e=>(0,r.jsxs)("div",{className:"order-item",children:[(0,r.jsxs)("div",{className:"order-details",children:[(0,r.jsx)("span",{className:"order-date",children:e.date}),(0,r.jsx)("span",{className:"order-status ".concat(e.status.toLowerCase()),children:e.status}),(0,r.jsxs)("span",{className:"order-total",children:["Сумма: ",e.total," ₽"]})]}),(0,r.jsx)(c(),{href:"/orders/".concat(e.id),className:"order-link",children:"Подробнее"})]},e.id))}):(0,r.jsx)("p",{className:"no-orders",children:"У вас нет заказов"})]})]})})}):(0,r.jsx)("div",{className:"profile",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("p",{className:"error-message",children:"Данные пользователя не найдены"}),(0,r.jsx)(c(),{href:"/login",className:"auth-link",children:"Войти в аккаунт"})]})})}},5717:(e,a,s)=>{Promise.resolve().then(s.bind(s,3805))},6421:(e,a,s)=>{"use strict";s.d(a,{li:()=>u,tw:()=>t,Rd:()=>d,_D:()=>i,ri:()=>h,ZB:()=>n,BN:()=>o});var r=s(1990);let l=s(3464).A.create({baseURL:"http://localhost:3002"});l.interceptors.request.use(e=>(e.headers.Authorization=window.localStorage.getItem("token"),e));let t=(0,r.zD)("auth/fetchAuth",async(e,a)=>{let{rejectWithValue:s}=a;try{let a=await fetch("http://localhost:3002/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})});if(!a.ok){let e=await a.json();return s(e)}return await a.json()}catch(e){return s(e.message)}}),i=(0,r.zD)("auth/fetchRegister",async(e,a)=>{let{rejectWithValue:s}=a;try{let{data:a}=await l.post("/api/auth/register",{email:e.email,password:e.password,confirmPassword:e.confirmPassword});return a}catch(e){var r;return s(null==(r=e.response)?void 0:r.data)}}),d=(0,r.zD)("auth/fetchAuthMe",async(e,a)=>{let{rejectWithValue:s}=a;try{let{data:e}=await l.get("/auth/me");return e}catch(e){return s(e.response.data)}}),c=(0,r.Z0)({name:"auth",initialState:{data:null,status:"idle",error:null},reducers:{logout:e=>{e.data=null,e.status="idle",e.error=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addMatcher(e=>e.type.endsWith("/pending"),e=>{e.status="loading",e.error=null}).addMatcher(e=>e.type.endsWith("/fulfilled"),(e,a)=>{e.status="succeeded",e.data=a.payload}).addMatcher(e=>e.type.endsWith("/rejected"),(e,a)=>{var s;e.status="failed",e.error=(null==(s=a.payload)?void 0:s.message)||"Произошла ошибка"})}}),o=e=>!!e.auth.data,n=e=>e.auth.error,{logout:h,clearError:m}=c.actions,u=c.reducer}},e=>{var a=a=>e(e.s=a);e.O(0,[536,464,874,635,441,684,358],()=>a(5717)),_N_E=e.O()}]);