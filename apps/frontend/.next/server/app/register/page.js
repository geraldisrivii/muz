(()=>{var e={};e.id=454,e.ids=[454],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16189:(e,s,r)=>{"use strict";var t=r(65773);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29971:(e,s,r)=>{Promise.resolve().then(r.bind(r,88395))},33873:e=>{"use strict";e.exports=require("path")},46055:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},54525:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66493:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=r(88395).default},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},87085:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=r(65239),a=r(48088),i=r(88170),o=r.n(i),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(s,l);let c={children:["",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,66493)),"/Users/a1111/projects/muz-store/apps/frontend/app/register/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,82154)),"/Users/a1111/projects/muz-store/apps/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/a1111/projects/muz-store/apps/frontend/app/register/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/register/page",pathname:"/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},88395:(e,s,r)=>{"use strict";r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/a1111/projects/muz-store/apps/frontend/src/views/registration/Registration.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/a1111/projects/muz-store/apps/frontend/src/views/registration/Registration.tsx","default")},90219:(e,s,r)=>{Promise.resolve().then(r.bind(r,98357))},94735:e=>{"use strict";e.exports=require("events")},98357:(e,s,r)=>{"use strict";r.d(s,{default:()=>u});var t=r(60687),a=r(43210),i=r(16189),o=r(85814),n=r.n(o),l=r(27605),c=r(54864),d=r(72006);r(54525);let u=()=>{let e=(0,i.useRouter)(),s=(0,c.wA)();(0,c.d4)(d.BN);let r=(0,c.d4)(d.ZB),[o,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)("register"),[h,x]=(0,a.useState)(""),{register:f,handleSubmit:v,watch:g,formState:{errors:j,isValid:b}}=(0,l.mN)({defaultValues:{fullName:"",email:"",password:"",confirmPassword:"",verificationCode:""},mode:"onChange"}),N=async e=>{let r=await s((0,d._D)(e));d._D.fulfilled.match(r)&&(x(e.email),m("verify"))},y=async s=>{try{let r=await fetch("http://localhost:3002/api/auth/email-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s.verificationCode,email:h})});await r.json(),r.ok?e.push("/login"):e.push("/")}catch(e){alert(e.message)}},w=g("password");return"verify"===p?(0,t.jsx)("section",{className:"Login",children:(0,t.jsxs)("div",{className:"preview",children:[(0,t.jsx)("h3",{className:"text-center",children:"Подтверждение Email"}),(0,t.jsxs)("p",{className:"text-center",children:["Код отправлен на ",h]}),(0,t.jsx)("div",{className:"registration-cssave",children:(0,t.jsxs)("form",{onSubmit:v(y),children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{className:"form-control-item",type:"text",placeholder:"Введите код из письма",...f("verificationCode",{required:"Введите код подтверждения"})}),o&&j.verificationCode&&(0,t.jsx)("p",{className:"check",children:j.verificationCode.message})]}),(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("button",{className:"btn btn-primary btn-block create-account",type:"submit",children:"ПОДТВЕРДИТЬ"})}),(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("button",{type:"button",className:"log-in",onClick:()=>m("register"),children:"Назад к регистрации"})})]})})]})}):(0,t.jsx)("section",{className:"Login",children:(0,t.jsxs)("div",{className:"preview",children:[(0,t.jsx)("h3",{className:"text-center",children:"Регистрация"}),r&&(0,t.jsx)("p",{className:"check",style:{color:"red",textAlign:"center"},children:r}),(0,t.jsx)("div",{className:"registration-cssave",children:(0,t.jsxs)("form",{onSubmit:v(N),children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{className:"form-control-item",type:"email",placeholder:"Email",...f("email",{required:"Введите почту",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Введите корректный email"}}),onFocus:()=>u(!0)}),o&&j.email&&(0,t.jsx)("p",{className:"check",children:j.email.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{className:"form-control-item",type:"password",placeholder:"Пароль",...f("password",{required:"Введите пароль",minLength:{value:6,message:"Минимум 6 символов"}}),onFocus:()=>u(!0)}),o&&j.password&&(0,t.jsx)("p",{className:"check",children:j.password.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("input",{className:"form-control-item",type:"password",placeholder:"Повторите пароль",...f("confirmPassword",{required:"Подтвердите пароль",validate:e=>e===w||"Пароли не совпадают"}),onFocus:()=>u(!0)}),o&&j.confirmPassword&&(0,t.jsx)("p",{className:"check",children:j.confirmPassword.message})]}),(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("button",{className:"btn btn-primary btn-block create-account",type:"submit",disabled:!b,children:"СОЗДАТЬ"})}),(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)(n(),{href:"/login",children:(0,t.jsxs)("button",{className:"log-in",type:"button",children:["Есть аккаунт? ",(0,t.jsx)("a",{children:"Войти"})]})})})]})})]})})}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,926,658,605,704],()=>r(87085));module.exports=t})();